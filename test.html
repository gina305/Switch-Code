<!DOCTYPE html>
<html>
<head>
	<title>Airtable Search Box v2</title>
</head>
<body>
	<h1>Airtable Search Box v2</h1>
	<input type="text" id="searchBox" placeholder="Search...">
	<div id="resultsContainer"></div>

	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script src="/js/app.js">

const searchBox = document.getElementById('searchBox');
const resultsContainer = document.getElementById('resultsContainer');

const airtableApiKey = 'keyUKafa60cDwHmoq';
const airtableBaseId = 'app32VEPUDOKJwj8t';
const airtableTableName = 'tblxIhDyoscjELMJm';

const airtableApiUrl = `https://api.airtable.com/v0/${airtableBaseId}/${airtableTableName}`;

searchBox.addEventListener('input', async () => {
    const searchTerm = searchBox.value.trim();
    resultsContainer.innerHTML = '';

    if (searchTerm.length > 0) {
        const records = await fetchAirtableRecords(searchTerm);
        renderAirtableRecords(records);
    }
});

async function fetchAirtableRecords(searchTerm) {
    const response = await axios.get(`${airtableApiUrl}?filterByFormula=OR(FIND("${searchTerm}", {Field 1}), FIND("${searchTerm}", {Field 2}))`, {
        headers: {
            'Authorization': `Bearer ${airtableApiKey}`
        }
    });

    return response.data.records;
}

function renderAirtableRecords(records) {
    records.forEach(record => {
        const resultDiv = document.createElement('div');
        resultDiv.classList.add('result');
        resultDiv.innerHTML = `
            <h2>${record.fields['Field 1']}</h2>
            <p>${record.fields['Field 2']}</p>
        `;
        resultsContainer.appendChild(resultDiv);
    });
}

  </script>
</body>
</html>
